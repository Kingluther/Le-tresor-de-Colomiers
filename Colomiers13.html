<!DOCTYPE html>
<html lang="fr">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Le trÃ©sor de Colomiers - Ã‰tape 13</title>
Â  Â  <style>
Â  Â  Â  Â  /* --- DESIGN GÃ‰NÃ‰RAL (IDENTIQUE) --- */
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Verdana', sans-serif;
Â  Â  Â  Â  Â  Â  background-color: #f0f2f5;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }

Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  max-width: 600px;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  background-color: white;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 15px rgba(0,0,0,0.1);
Â  Â  Â  Â  Â  Â  padding-bottom: 40px;
Â  Â  Â  Â  }

Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  color: #d35400;
Â  Â  Â  Â  Â  Â  font-size: 24px;
Â  Â  Â  Â  Â  Â  margin-bottom: 30px;
Â  Â  Â  Â  Â  Â  border-bottom: 2px solid #eee;
Â  Â  Â  Â  Â  Â  padding-bottom: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  h2 {
Â  Â  Â  Â  Â  Â  font-size: 18px;
Â  Â  Â  Â  Â  Â  color: #2980b9;
Â  Â  Â  Â  Â  Â  margin-top: 40px;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  Â  Â  border-left: 5px solid #2980b9;
Â  Â  Â  Â  Â  Â  padding-left: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- STYLE DES DIALOGUES (IDENTIQUE) --- */
Â  Â  Â  Â  .dialogue-row {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: flex-start;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .avatar {
Â  Â  Â  Â  Â  Â  width: 50px;
Â  Â  Â  Â  Â  Â  height: 50px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  border: 2px solid #ccc;
Â  Â  Â  Â  Â  Â  flex-shrink: 0;
Â  Â  Â  Â  Â  Â  margin-right: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .bubble {
Â  Â  Â  Â  Â  Â  background-color: #e9eff5;
Â  Â  Â  Â  Â  Â  padding: 12px 15px;
Â  Â  Â  Â  Â  Â  border-radius: 0 15px 15px 15px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  font-size: 15px;
Â  Â  Â  Â  Â  Â  line-height: 1.4;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .bubble::before {
Â  Â  Â  Â  Â  Â  content: "";
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: -10px;
Â  Â  Â  Â  Â  Â  width: 0;
Â  Â  Â  Â  Â  Â  height: 0;
Â  Â  Â  Â  Â  Â  border-top: 10px solid #e9eff5;
Â  Â  Â  Â  Â  Â  border-left: 10px solid transparent;
Â  Â  Â  Â  }

Â  Â  Â  Â  .name-tag {
Â  Â  Â  Â  Â  Â  font-size: 11px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  color: #666;
Â  Â  Â  Â  Â  Â  margin-bottom: 4px;
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Petite classe pour les descriptions narratives (actions, sons) */
Â  Â  Â  Â  .narrative-note {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  font-style: italic;
Â  Â  Â  Â  Â  Â  color: #888;
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  Â  Â  margin: 15px 0;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- COORDONNÃ‰ES GPS (IDENTIQUE) --- */
Â  Â  Â  Â  .gps-box {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin: 20px 0;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  background-color: #fff3cd;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  border: 1px solid #ffeeba;
Â  Â  Â  Â  }
Â  Â  Â  Â  .gps-link {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  Â  Â  color: #856404;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  Â  Â  border-bottom: 2px dotted #856404;
Â  Â  Â  Â  }
Â  Â  Â  Â  .gps-link:hover {
Â  Â  Â  Â  Â  Â  background-color: #856404;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- ENCART "MISSION" (ORANGE) --- */
Â  Â  Â  Â  .mission-box {
Â  Â  Â  Â  Â  Â  border: 3px dashed #d35400;
Â  Â  Â  Â  Â  Â  background-color: #fffaf0; /* Fond trÃ¨s clair */
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  margin: 30px 0;
Â  Â  Â  Â  Â  Â  text-align: left;
Â  Â  Â  Â  Â  Â  font-size: 15px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* Zone de saisie du rÃ©sultat (M) */
Â  Â  Â  Â  .answer-input-zone {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  margin: 15px 0;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  background-color: #f8f9fa;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .answer-input-zone label {
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  margin-right: 10px;
Â  Â  Â  Â  Â  Â  color: #d35400; /* Mettre la variable en couleur mission */
Â  Â  Â  Â  }

Â  Â  Â  Â  .answer-input-zone input {
Â  Â  Â  Â  Â  Â  width: 50px;
Â  Â  Â  Â  Â  Â  padding: 8px;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  font-size: 18px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* Message de validation des contraintes */
Â  Â  Â  Â  #validation-message {
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  color: #e74c3c;
Â  Â  Â  Â  Â  Â  min-height: 20px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- ENCART "DIRECTION" (GRIS/NEUTRE) --- */
Â  Â  Â  Â  .direction-box {
Â  Â  Â  Â  Â  Â  background-color: #f8f9fa;
Â  Â  Â  Â  Â  Â  border-left: 6px solid #95a5a6;
Â  Â  Â  Â  Â  Â  padding: 15px 20px;
Â  Â  Â  Â  Â  Â  margin-top: 40px;
Â  Â  Â  Â  Â  Â  color: #555;
Â  Â  Â  Â  Â  Â  font-style: italic;
Â  Â  Â  Â  Â  Â  font-size: 15px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .direction-box strong {
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  font-style: normal;
Â  Â  Â  Â  }
Â  Â  Â  Â  .direction-box .path-option {
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  }
Â  Â  Â  Â  .direction-box .path-link {
Â  Â  Â  Â  Â  Â  color: #2980b9;
Â  Â  Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  Â  Â  border-bottom: 1px dotted #2980b9;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* --- Styles spÃ©cifiques pour les avatars superposÃ©s avec chevauchement lÃ©ger (IDENTIQUE) --- */
Â  Â  Â  Â  .stacked-avatars-visible {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  width: 80px;Â 
Â  Â  Â  Â  Â  Â  height: 50px;Â 
Â  Â  Â  Â  Â  Â  flex-shrink: 0;
Â  Â  Â  Â  Â  Â  margin-right: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stacked-avatars-visible .avatar-left {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  z-index: 2;Â 
Â  Â  Â  Â  Â  Â  width: 50px;
Â  Â  Â  Â  Â  Â  height: 50px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  border: 2px solid #ccc;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stacked-avatars-visible .avatar-right {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 30px;Â 
Â  Â  Â  Â  Â  Â  z-index: 1;
Â  Â  Â  Â  Â  Â  width: 50px;
Â  Â  Â  Â  Â  Â  height: 50px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  border: 2px solid #ccc;
Â  Â  Â  Â  }

Â  Â  </style>
</head>
<body onload="initEnigmaPage('M')">

<div class="container">

Â  Â  <h1>Le trÃ©sor de Colomiers</h1>

Â  Â  <h2>13. Place Alex Raymond</h2>

Â  Â  <div class="gps-box">
Â  Â  Â  Â  ğŸ“ Cliquez pour y aller :<br>
Â  Â  Â  Â  <a href="https://www.google.com/maps/search/?api=1&query=43.613556,1.33711103.61238726884171" target="_blank" class="gps-link">
Â  Â  Â  Â  Â  Â  43.610179, 1.334539
Â  Â  Â  Â  </a>
Â  Â  </div>


Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Serge.jpg" alt="Serge" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Serge</span>
Â  Â  Â  Â  Â  Â  Vous entendez ??
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <div class="stacked-avatars-visible">
Â  Â  Â  Â  Â  Â  <img src="Loumpour.jpg" alt="Loumpour" class="avatar-left">
Â  Â  Â  Â  Â  Â  <img src="Bernard.jpg" alt="Bernard" class="avatar-right">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Loumpour et Bernard (perplexes)</span>
Â  Â  Â  Â  Â  Â  Euhâ€¦ non, quoi ?
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Serge.jpg" alt="Serge" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Serge</span>
Â  Â  Â  Â  Â  Â  Les bruits de la fÃªteâ€¦ les flonflons, les accordÃ©ons, les manÃ¨gesâ€¦
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Loumpour.jpg" alt="Loumpour" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Loumpour</span>
Â  Â  Â  Â  Â  Â  Euh, jâ€™entends rien, mais câ€™est sÃ»rement parce que tâ€™es plus sensible Ã  la musique que nousâ€¦
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Bernard.jpg" alt="Bernard" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Bernard</span>
Â  Â  Â  Â  Â  Â  Oui, et aussi parce que nous sommes prÃ©cisÃ©ment Ã  lâ€™endroit oÃ¹ se dressait le mÃ¢t de cocagne. Avant la construction du nouvel HÃ´tel de Ville en 1991, cette place Ã©tait une simple place couverte de bitume, sans rien autour. Mais en son centre on trouvait encore le fameux mÃ¢t typique des festivitÃ©s du Lauragais.
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Serge.jpg" alt="Serge" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Serge</span>
Â  Â  Â  Â  Â  Â  Câ€™est pas le truc oÃ¹ il faut grimper tout en haut pour dÃ©crocher du jambon et le mÃ¢t Ã©tait frottÃ© avec de la graisse ou du savon pour tâ€™empÃªcher de grimper ?
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Bernard.jpg" alt="Bernard" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Bernard</span>
Â  Â  Â  Â  Â  Â  Exactement ! Seuls les plus habiles et musclÃ©s parvenaient Ã  ramener quelque chose.
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Loumpour.jpg" alt="Loumpour" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Loumpour (rÃªveuse)</span>
Â  Â  Â  Â  Â  Â  â€¦ un jeu oÃ¹ pour gagner il suffit de savoir monter aux arbresâ€¦ un vrai rÃªve de koalaâ€¦
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Bernard.jpg" alt="Bernard" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Bernard</span>
Â  Â  Â  Â  Â  Â  Aujourdâ€™hui les festivitÃ©s du 14 juillet sont toujours cÃ©lÃ©brÃ©es ici avec les manÃ¨ges de la fÃªte foraine, et le feu dâ€™artifice est tirÃ© le 13 juillet au soir sur le frontispice de lâ€™Hotel de Ville.
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Loumpour.jpg" alt="Loumpour" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Loumpour</span>
Â  Â  Â  Â  Â  Â  Le 13 juilletâ€¦ ouais, y a pas quâ€™en matiÃ¨re de rugby quâ€™on craint la concurrence de Toulouseâ€¦
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Serge.jpg" alt="Serge" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Serge</span>
Â  Â  Â  Â  Â  Â  Tiens, puisque tu nous reparles de rugby, regarde, lÃ , le Sadourny CafÃ©. Ton ancien arriÃ¨re du XV de France, il est restaurateur maintenant !
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Loumpour.jpg" alt="Loumpour" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Loumpour</span>
Â  Â  Â  Â  Â  Â  Jâ€™espÃ¨re quâ€™il y a des plats Ã  lâ€™eucalyptus !
Â  Â  Â  Â  </div>
Â  Â  </div>


Â  Â  <div class="mission-box">
Â  Â  Â  Â  Attardez vous un peu sur lâ€™esplanade de la mairie. En regardant la porte dâ€™entrÃ©e de lâ€™Ã©difice depuis votre position, combien de topiaires (petits arbustes taillÃ©s prÃ©cautionneusement) comptez-vous ?
Â  Â  Â  Â  <br>
Â  Â  Â  Â  Ajoutez ceux Ã  votre gauche et ceux Ã  votre droite. Câ€™est un nombre impair.
Â  Â  Â  Â  <br><br>
Â  Â  Â  Â  Notez ce nombre qui vaut **M** :
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="answer-input-zone">
Â  Â  Â  Â  Â  Â  <label for="M">M =</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="M" min="0" max="9" required onchange="handleEnigmaInput('M')" onkeyup="handleEnigmaInput('M')">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div id="validation-message"></div>
Â  Â  </div>


Â  Â  <div class="direction-box">
Â  Â  Â  Â  Quittez Ã  prÃ©sent la place en laissant lâ€™HÃ´tel de ville sur votre droite. Puis empruntez lâ€™avenue dâ€™Occitanie vers la droite.
Â  Â  Â  Â  <br><br>
Â  Â  Â  Â  <strong>Deux possibilitÃ©s sâ€™offrent Ã  vous :</strong>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="path-option">
Â  Â  Â  Â  Â  Â  <strong>1. Option "Passerelle" :</strong>
Â  Â  Â  Â  Â  Â  Soit passer par le square des marronniers (<a href="https://www.google.com/maps/search/?api=1&query=43.611912,1.333595" target="_blank" class="path-link">43.611912, 1.333595</a>) puis la passerelle (<a href="https://www.google.com/maps/search/?api=1&query=43.612387,1.333596" target="_blank" class="path-link">43.612387, 1.333596</a>) aprÃ¨s quoi vous contournerez le premier immeuble en le laissant Ã  votre gauche.
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="path-option">
Â  Â  Â  Â  Â  Â  <strong>2. Option "Rue de Limogne" :</strong>
Â  Â  Â  Â  Â  Â  Soit vous empruntez la rue de Limogne (<a href="https://www.google.com/maps/search/?api=1&query=43.611545,1.333881" target="_blank" class="path-link">43.611545, 1.333881</a>) jusquâ€™au <a href="https://www.google.com/maps/search/?api=1&query=43.612100,1.334133" target="_blank" class="path-link">43.612100, 1.334133</a> et vous prenez en face au passage piÃ©ton.
Â  Â  Â  Â  </div>
Â  Â  </div>

</div>

<script>
Â  Â  // ----------------------------------------------------------------------
Â  Â  // --- GESTION ET PERSISTANCE DES DONNÃ‰ES (Ã€ INCLURE DANS CHAQUE PAGE) ---
Â  Â  // ----------------------------------------------------------------------

Â  Â  // ClÃ© de stockage (doit Ãªtre la mÃªme sur toutes les pages)
Â  Â  const ENIGMA_STORAGE_KEY = 'colomiers_enigma_answers';
Â  Â  // Maintien de la structure complÃ¨te des variables pour la persistance
Â  Â  const DEFAULT_ANSWERS = {A: null, B: null, C: null, D: null, E: null, F: null, G: null, H: null, I: null, J: null, K: null, L: null, M: null, N: null};

Â  Â  /**
Â  Â  Â * Charge les rÃ©ponses depuis le stockage local du navigateur.
Â  Â  Â */
Â  Â  function loadEnigmaAnswers() {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const savedData = localStorage.getItem(ENIGMA_STORAGE_KEY);
Â  Â  Â  Â  Â  Â  // Fusionner pour s'assurer que toutes les clÃ©s existent
Â  Â  Â  Â  Â  Â  return savedData ? {...DEFAULT_ANSWERS, ...JSON.parse(savedData)} : DEFAULT_ANSWERS;
Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  console.error("Impossible de charger les rÃ©ponses. RÃ©initialisation des donnÃ©es.", e);
Â  Â  Â  Â  Â  Â  return DEFAULT_ANSWERS;
Â  Â  Â  Â  }
Â  Â  }

Â  Â  /**
Â  Â  Â * Sauvegarde les rÃ©ponses dans le stockage local du navigateur.
Â  Â  Â * @param {Object} vars - L'objet contenant toutes les variables d'Ã©nigme.
Â  Â  Â */
Â  Â  function saveEnigmaAnswers(vars) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  localStorage.setItem(ENIGMA_STORAGE_KEY, JSON.stringify(vars));
Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  console.error("Impossible de sauvegarder les rÃ©ponses. Le stockage local est bloquÃ©.", e);
Â  Â  Â  Â  }
Â  Â  }

Â  Â  /**
Â  Â  Â * GÃ¨re la saisie de l'utilisateur pour une variable spÃ©cifique (M: chiffre impair unique).
Â  Â  Â * @param {string} varKey - La lettre de la variable (ex: 'M').
Â  Â  Â */
Â  Â  function handleEnigmaInput(varKey) {
Â  Â  Â  Â  const inputElement = document.getElementById(varKey);
Â  Â  Â  Â  const validationMessage = document.getElementById('validation-message');
Â  Â  Â  Â  
Â  Â  Â  Â  let value = inputElement.value.trim();
Â  Â  Â  Â  let numericValue = parseInt(value);

Â  Â  Â  Â  let currentVars = loadEnigmaAnswers();
Â  Â  Â  Â  validationMessage.textContent = "";
Â  Â  Â  Â  validationMessage.style.color = "#e74c3c"; // Rouge par dÃ©faut

Â  Â  Â  Â  if (value === "") {
Â  Â  Â  Â  Â  Â  // Cas oÃ¹ le champ est vide
Â  Â  Â  Â  Â  Â  currentVars[varKey] = null;
Â  Â  Â  Â  Â  Â  saveEnigmaAnswers(currentVars);
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // 1. Validation de la plage et du format
Â  Â  Â  Â  if (isNaN(numericValue) || value.length > 1 || numericValue < 0 || numericValue > 9) {
Â  Â  Â  Â  Â  Â  validationMessage.textContent = "âŒ Veuillez entrer un chiffre unique (0-9).";
Â  Â  Â  Â  Â  Â  currentVars[varKey] = null;
Â  Â  Â  Â  Â  Â  saveEnigmaAnswers(currentVars);
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  // 2. Validation SpÃ©cifique (Doit Ãªtre un nombre impair)
Â  Â  Â  Â  if (numericValue % 2 === 0) {
Â  Â  Â  Â  Â  Â  validationMessage.textContent = "âŒ Le nombre doit Ãªtre impair (voir indice de la mission).";
Â  Â  Â  Â  Â  Â  currentVars[varKey] = null;
Â  Â  Â  Â  Â  Â  saveEnigmaAnswers(currentVars);
Â  Â  Â  Â  Â  Â  return;
Â  Â  Â  Â  }

Â  Â  Â  Â  
Â  Â  Â  Â  // 3. Si la valeur est valide, on la sauvegarde
Â  Â  Â  Â  currentVars[varKey] = numericValue;
Â  Â  Â  Â  saveEnigmaAnswers(currentVars);
Â  Â  Â  Â  
Â  Â  Â  Â  // Message optionnel de confirmation si la valeur est sauvegardÃ©e
Â  Â  Â  Â  validationMessage.textContent = "âœ… Chiffre M sauvegardÃ© !";
Â  Â  Â  Â  validationMessage.style.color = "#2ecc71"; // Vert pour succÃ¨s
Â  Â  Â  Â  setTimeout(() => { validationMessage.textContent = ""; }, 3000); // Effacer aprÃ¨s 3 secondes

Â  Â  }
Â  Â  
Â  Â  /**
Â  Â  Â * Fonction d'initialisation : charge les donnÃ©es au chargement de la page.
Â  Â  Â * @param {string} varKey - La lettre de la variable pour cette page (ex: 'M').
Â  Â  Â */
Â  Â  function initEnigmaPage(varKey) {
Â  Â  Â  Â  const loadedVars = loadEnigmaAnswers();
Â  Â  Â  Â  const inputElement = document.getElementById(varKey);
Â  Â  Â  Â  const savedValue = loadedVars[varKey];
Â  Â  Â  Â  
Â  Â  Â  Â  if (inputElement && savedValue !== null) {
Â  Â  Â  Â  Â  Â  // Afficher la valeur sauvegardÃ©e
Â  Â  Â  Â  Â  Â  inputElement.value = savedValue;
Â  Â  Â  Â  } else if (inputElement) {
Â  Â  Â  Â  Â  Â  inputElement.value = ""; // S'assurer qu'il est vide si aucune valeur n'est sauvegardÃ©e
Â  Â  Â  Â  }
Â  Â  };
</script>

</body>
</html>