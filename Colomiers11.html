<!DOCTYPE html>
<html lang="fr">
<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0">
Â  Â  <title>Le trÃ©sor de Colomiers - Ã‰tape 11</title>
Â  Â  <style>
Â  Â  Â  Â  /* --- DESIGN GÃ‰NÃ‰RAL (IDENTIQUE) --- */
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  font-family: 'Verdana', sans-serif;
Â  Â  Â  Â  Â  Â  background-color: #f0f2f5;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  padding: 0;
Â  Â  Â  Â  Â  Â  color: #333;
Â  Â  Â  Â  }

Â  Â  Â  Â  .container {
Â  Â  Â  Â  Â  Â  max-width: 600px;
Â  Â  Â  Â  Â  Â  margin: 0 auto;
Â  Â  Â  Â  Â  Â  background-color: white;
Â  Â  Â  Â  Â  Â  min-height: 100vh;
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 15px rgba(0,0,0,0.1);
Â  Â  Â  Â  Â  Â  padding-bottom: 40px;
Â  Â  Â  Â  }

Â  Â  Â  Â  h1 {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  color: #d35400;
Â  Â  Â  Â  Â  Â  font-size: 24px;
Â  Â  Â  Â  Â  Â  margin-bottom: 30px;
Â  Â  Â  Â  Â  Â  border-bottom: 2px solid #eee;
Â  Â  Â  Â  Â  Â  padding-bottom: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  h2 {
Â  Â  Â  Â  Â  Â  font-size: 18px;
Â  Â  Â  Â  Â  Â  color: #2980b9;
Â  Â  Â  Â  Â  Â  margin-top: 40px;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  Â  Â  border-left: 5px solid #2980b9;
Â  Â  Â  Â  Â  Â  padding-left: 10px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- STYLE DES DIALOGUES (IDENTIQUE) --- */
Â  Â  Â  Â  .dialogue-row {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: flex-start;
Â  Â  Â  Â  Â  Â  margin-bottom: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .avatar {
Â  Â  Â  Â  Â  Â  width: 50px;
Â  Â  Â  Â  Â  Â  height: 50px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  border: 2px solid #ccc;
Â  Â  Â  Â  Â  Â  flex-shrink: 0;
Â  Â  Â  Â  Â  Â  margin-right: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .bubble {
Â  Â  Â  Â  Â  Â  background-color: #e9eff5;
Â  Â  Â  Â  Â  Â  padding: 12px 15px;
Â  Â  Â  Â  Â  Â  border-radius: 0 15px 15px 15px;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  font-size: 15px;
Â  Â  Â  Â  Â  Â  line-height: 1.4;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .bubble::before {
Â  Â  Â  Â  Â  Â  content: "";
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: -10px;
Â  Â  Â  Â  Â  Â  width: 0;
Â  Â  Â  Â  Â  Â  height: 0;
Â  Â  Â  Â  Â  Â  border-top: 10px solid #e9eff5;
Â  Â  Â  Â  Â  Â  border-left: 10px solid transparent;
Â  Â  Â  Â  }

Â  Â  Â  Â  .name-tag {
Â  Â  Â  Â  Â  Â  font-size: 11px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  color: #666;
Â  Â  Â  Â  Â  Â  margin-bottom: 4px;
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  text-transform: uppercase;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Petite classe pour les descriptions narratives (actions, sons) */
Â  Â  Â  Â  .narrative-note {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  font-style: italic;
Â  Â  Â  Â  Â  Â  color: #888;
Â  Â  Â  Â  Â  Â  font-size: 13px;
Â  Â  Â  Â  Â  Â  margin: 15px 0;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- COORDONNÃ‰ES GPS (IDENTIQUE) --- */
Â  Â  Â  Â  .gps-box {
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  margin: 20px 0;
Â  Â  Â  Â  Â  Â  padding: 15px;
Â  Â  Â  Â  Â  Â  background-color: #fff3cd;
Â  Â  Â  Â  Â  Â  border-radius: 8px;
Â  Â  Â  Â  Â  Â  border: 1px solid #ffeeba;
Â  Â  Â  Â  }
Â  Â  Â  Â  .gps-link {
Â  Â  Â  Â  Â  Â  display: inline-block;
Â  Â  Â  Â  Â  Â  margin-top: 5px;
Â  Â  Â  Â  Â  Â  color: #856404;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  text-decoration: none;
Â  Â  Â  Â  Â  Â  border-bottom: 2px dotted #856404;
Â  Â  Â  Â  }
Â  Â  Â  Â  .gps-link:hover {
Â  Â  Â  Â  Â  Â  background-color: #856404;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- ENCART "MISSION" (ORANGE) --- */
Â  Â  Â  Â  .mission-box {
Â  Â  Â  Â  Â  Â  border: 3px dashed #d35400;
Â  Â  Â  Â  Â  Â  background-color: #fffaf0; /* Changement vers le jaune/orange plus clair */
Â  Â  Â  Â  Â  Â  padding: 20px;
Â  Â  Â  Â  Â  Â  margin: 30px 0;
Â  Â  Â  Â  Â  Â  text-align: left; /* AlignÃ© Ã  gauche pour la mission */
Â  Â  Â  Â  Â  Â  font-size: 15px;
Â  Â  Â  Â  Â  Â  border-radius: 10px;
Â  Â  Â  Â  Â  Â  color: #333; /* Texte plus sombre pour la lisibilitÃ© */
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* Styles pour les options Ã  choix multiple dans la mission */
Â  Â  Â  Â  .mission-options {
Â  Â  Â  Â  Â  Â  margin-top: 15px;
Â  Â  Â  Â  Â  Â  font-weight: normal;
Â  Â  Â  Â  }
Â  Â  Â  Â  .mission-options label {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  Â  Â  margin: 5px 0;
Â  Â  Â  Â  Â  Â  font-weight: normal;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  }
Â  Â  Â  Â  .mission-options input[type="radio"] {
Â  Â  Â  Â  Â  Â  margin-right: 8px;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Zone de saisie du rÃ©sultat (K) */
Â  Â  Â  Â  .answer-input-zone {
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  margin: 15px 0;
Â  Â  Â  Â  Â  Â  padding: 10px;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  border-radius: 5px;
Â  Â  Â  Â  Â  Â  background-color: #f8f9fa;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  .answer-input-zone label {
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  margin-right: 10px;
Â  Â  Â  Â  Â  Â  color: #d35400; /* Mettre la variable en couleur mission */
Â  Â  Â  Â  }

Â  Â  Â  Â  .answer-input-zone input {
Â  Â  Â  Â  Â  Â  width: 50px;
Â  Â  Â  Â  Â  Â  padding: 8px;
Â  Â  Â  Â  Â  Â  border: 1px solid #ccc;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  font-size: 18px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* Message de validation des contraintes */
Â  Â  Â  Â  #validation-message {
Â  Â  Â  Â  Â  Â  margin-top: 10px;
Â  Â  Â  Â  Â  Â  font-size: 14px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  color: #e74c3c;
Â  Â  Â  Â  Â  Â  min-height: 20px;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* --- ENCART "DIRECTION" (GRIS/NEUTRE) --- */
Â  Â  Â  Â  .direction-box {
Â  Â  Â  Â  Â  Â  background-color: #f8f9fa;
Â  Â  Â  Â  Â  Â  border-left: 6px solid #95a5a6;
Â  Â  Â  Â  Â  Â  padding: 15px 20px;
Â  Â  Â  Â  Â  Â  margin-top: 40px;
Â  Â  Â  Â  Â  Â  color: #555;
Â  Â  Â  Â  Â  Â  font-style: italic;
Â  Â  Â  Â  Â  Â  font-size: 15px;
Â  Â  Â  Â  }
Â  Â  Â  Â  
Â  Â  Â  Â  /* --- Styles spÃ©cifiques pour les avatars superposÃ©s (identique) --- */
Â  Â  Â  Â  .stacked-avatars-visible {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  width: 80px;
Â  Â  Â  Â  Â  Â  height: 50px;
Â  Â  Â  Â  Â  Â  flex-shrink: 0;
Â  Â  Â  Â  Â  Â  margin-right: 15px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stacked-avatars-visible .avatar-left {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  z-index: 2; 
Â  Â  Â  Â  Â  Â  width: 50px;
Â  Â  Â  Â  Â  Â  height: 50px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  border: 2px solid #ccc;
Â  Â  Â  Â  }

Â  Â  Â  Â  .stacked-avatars-visible .avatar-right {
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 30px;
Â  Â  Â  Â  Â  Â  z-index: 1;
Â  Â  Â  Â  Â  Â  width: 50px;
Â  Â  Â  Â  Â  Â  height: 50px;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  Â  Â  border: 2px solid #ccc;
Â  Â  Â  Â  }

Â  Â  </style>
</head>
<body onload="initEnigmaPage('K')">

<div class="container">

Â  Â  <h1>Le trÃ©sor de Colomiers</h1>

Â  Â  <h2>11. Lâ€™espace nautique</h2>

Â  Â  <div class="gps-box">
Â  Â  Â  Â  ğŸ“ Cliquez pour y aller :<br>
Â  Â  Â  Â  <a href="maps.google.com/6" target="_blank" class="gps-link">
Â  Â  Â  Â  Â  Â  43.608177, 1.332450
Â  Â  Â  Â  </a>
Â  Â  </div>


Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <div class="stacked-avatars-visible">
Â  Â  Â  Â  Â  Â  <img src="Serge.jpg" alt="Serge" class="avatar-left">
Â  Â  Â  Â  Â  Â  <img src="Bernard.jpg" alt="Bernard" class="avatar-right">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Serge et Bernard</span>
Â  Â  Â  Â  Â  Â  â€¦
Â  Â  Â  Â  </div>
Â  Â  </div>
Â  Â  <div class="narrative-note">
Â  Â  Â  Â  (en pamoison devant le toboggan)
Â  Â  </div>


Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Loumpour.jpg" alt="Loumpour" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Loumpour</span>
Â  Â  Â  Â  Â  Â  Ah ben, Ã§a au moins Ã§a vous en bouche un coin (coin). Ca va peut-Ãªtre vous Ã©tonner, mais cÃ´tÃ© sport, je pense que jâ€™en connais plus que vous ! Colomiers est une super ville connue dans le monde entier pour ses performances sportives. Lâ€™USC Colomiers Rugby a remportÃ© le challenge europÃ©en en 1998 et a mÃªme Ã©tÃ© vice champion dâ€™Europe en 1999 et finaliste du championnat de France en 2000 !
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Serge.jpg" alt="Serge" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Serge</span>
Â  Â  Â  Â  Â  Â  Ouais, mais Ã§a vaut pas les performances du Stade Toulousain.
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Loumpour.jpg" alt="Loumpour" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Loumpour</span>
Â  Â  Â  Â  Â  Â  Peut-Ãªtre mais pour une ville dix fois plus petite Ã§a claque. Et en plus le Colomiers Rugby a aussi formÃ© de grands joueurs internationaux : Jean-Luc Sadourny, les Skrela pÃ¨re et fils, et puis Fabien GalthiÃ© actuel sÃ©lectionneur de lâ€™Ã©quipe de France !
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Bernard.jpg" alt="Bernard" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Bernard</span>
Â  Â  Â  Â  Â  Â  Ok, ok, mais tâ€™as dis Â« le monde entier Â». Les joueurs ne sont pas connus pour leur ville, mais pour le pays quâ€™ils reprÃ©sentent.
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Loumpour.jpg" alt="Loumpour" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Loumpour</span>
Â  Â  Â  Â  Â  Â  Peut-Ãªtre, mais quâ€™est-ce que tu dis de Ã§a ? En 2022, 9 adolescents issus de Breakinâ€™School, lâ€™Ã©cole de breakdance de Colomiers ont Ã©tÃ© sacrÃ©s Champions du Monde de breakdance au Japon !
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Bernard.jpg" alt="Bernard" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Bernard</span>
Â  Â  Â  Â  Â  Â  Ouahou, la classe ! Mais en attendant, câ€™est plutÃ´t embÃªtantâ€¦
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Loumpour.jpg" alt="Loumpour" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Loumpour</span>
Â  Â  Â  Â  Â  Â  Je vois pas pourquoi.
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Bernard.jpg" alt="Bernard" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Bernard</span>
Â  Â  Â  Â  Â  Â  Ben parce que Ã§a nous fait un trÃ©sor de plus ! Le sport aussi Ã§a existe depuis toujoursâ€¦ Alors, câ€™est quoi quâ€™on cherche ? Un coffre plein dâ€™or cachÃ© dans un sous-terrain ? Les reliques dâ€™une sainte ? La douceur de vivre ? De lâ€™art (contemporain ou pas) ? Des ronds points ? Des enfants ? Je sais plus moi !
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Bernard.jpg" alt="Bernard" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Bernard</span>
Â  Â  Â  Â  Â  Â  Serge ! Il en est oÃ¹ Didier ?
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Serge.jpg" alt="Serge" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Serge</span>
Â  Â  Â  Â  Â  Â  Je sais pas, je vais lui demanderâ€¦
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  
Â  Â  <div class="mission-box">
Â  Â  Â  Â  Avant de quitter le parking, comptez du mieux que vous pourrez le nombre de tronÃ§ons de toboggan que vous voyez (certains sont cachÃ©s par la vÃ©gÃ©tation ou les murs, ce nâ€™est pas grave).
Â  Â  Â  Â  <br>
Â  Â  Â  Â  **Combien en comptez-vous Ã  peu prÃ¨s ?**
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="mission-options" onchange="handleEnigmaInput('K')">
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <label><input type="radio" name="K_choice" id="option1" value="1"> 1) une dizaine</label>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <label><input type="radio" name="K_choice" id="option2" value="2"> 2) **une vingtaine**</label>
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  <label><input type="radio" name="K_choice" id="option3" value="3"> 3) une quarantaine</label>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <br>
Â  Â  Â  Â  Notez le chiffre correspondant Ã  la bonne rÃ©ponse qui vaut **K** :
Â  Â  Â  Â  
Â  Â  Â  Â  <div class="answer-input-zone">
Â  Â  Â  Â  Â  Â  <label for="K">K =</label>
Â  Â  Â  Â  Â  Â  <input type="number" id="K" min="1" max="3" required readonly>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  
Â  Â  Â  Â  <div id="validation-message"></div>
Â  Â  Â  Â  <br>
Â  Â  Â  Â  (indice supplÃ©mentaire : si vous multipliez ce chiffre par 5 vous saurez combien de mÃ¨tres environ fait la longueur du toboggan !)
Â  Â  </div>


Â  Â  <div class="dialogue-row">
Â  Â  Â  Â  <img src="Loumpour.jpg" alt="Loumpour" class="avatar">
Â  Â  Â  Â  <div class="bubble">
Â  Â  Â  Â  Â  Â  <span class="name-tag">Loumpour</span>
Â  Â  Â  Â  Â  Â  Bon allez, de toute faÃ§on, on avait dit direction la mairie. Câ€™est parti !
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="narrative-note">
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  </div>
Â  Â  </div>


Â  Â  <div class="direction-box">
Â  Â  Â  Â  Repassez devant lâ€™entrÃ©e de lâ€™espace nautique, poursuivez en face de vous en laissant lâ€™aire de jeux et le city stade Ã  votre gauche puis tournez Ã  gauche au niveau du kiosque pour arriver devant lâ€™ancienne gare.
Â  Â  </div>

</div>

<script>
Â  Â  // ----------------------------------------------------------------------
Â  Â  // --- GESTION ET PERSISTANCE DES DONNÃ‰ES (Ã€ INCLURE DANS CHAQUE PAGE) ---
Â  Â  // ----------------------------------------------------------------------

Â  Â  // ClÃ© de stockage (doit Ãªtre la mÃªme sur toutes les pages)
Â  Â  const ENIGMA_STORAGE_KEY = 'colomiers_enigma_answers';
Â  Â  // Maintien de la structure complÃ¨te des variables pour la persistance
Â  Â  const DEFAULT_ANSWERS = {A: null, B: null, C: null, D: null, E: null, F: null, G: null, H: null, I: null, J: null, K: null, L: null, M: null, N: null};

Â  Â  /**
Â  Â  Â * Charge les rÃ©ponses depuis le stockage local du navigateur.
Â  Â  Â */
Â  Â  function loadEnigmaAnswers() {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  const savedData = localStorage.getItem(ENIGMA_STORAGE_KEY);
Â  Â  Â  Â  Â  Â  // Fusionner pour s'assurer que toutes les clÃ©s existent
Â  Â  Â  Â  Â  Â  return savedData ? {...DEFAULT_ANSWERS, ...JSON.parse(savedData)} : DEFAULT_ANSWERS;
Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  console.error("Impossible de charger les rÃ©ponses. RÃ©initialisation des donnÃ©es.", e);
Â  Â  Â  Â  Â  Â  return DEFAULT_ANSWERS;
Â  Â  Â  Â  }
Â  Â  }

Â  Â  /**
Â  Â  Â * Sauvegarde les rÃ©ponses dans le stockage local du navigateur.
Â  Â  Â * @param {Object} vars - L'objet contenant toutes les variables d'Ã©nigme.
Â  Â  Â */
Â  Â  function saveEnigmaAnswers(vars) {
Â  Â  Â  Â  try {
Â  Â  Â  Â  Â  Â  localStorage.setItem(ENIGMA_STORAGE_KEY, JSON.stringify(vars));
Â  Â  Â  Â  } catch (e) {
Â  Â  Â  Â  Â  Â  console.error("Impossible de sauvegarder les rÃ©ponses. Le stockage local est bloquÃ©.", e);
Â  Â  Â  Â  }
Â  Â  }

Â  Â  /**
Â  Â  Â * GÃ¨re la saisie de l'utilisateur pour une variable spÃ©cifique (QCM pour K).
Â  Â  Â * @param {string} varKey - La lettre de la variable (ex: 'K').
Â  Â  Â */
Â  Â  function handleEnigmaInput(varKey) {
Â  Â  Â  Â  const inputElement = document.getElementById(varKey);
Â  Â  Â  Â  const validationMessage = document.getElementById('validation-message');
Â  Â  Â  Â  const selectedRadio = document.querySelector('input[name="K_choice"]:checked');
Â  Â  Â  Â  
Â  Â  Â  Â  let value = null;

Â  Â  Â  Â  if (selectedRadio) {
Â  Â  Â  Â  Â  Â  value = parseInt(selectedRadio.value);
Â  Â  Â  Â  } 
Â  Â  Â  Â  
Â  Â  Â  Â  let currentVars = loadEnigmaAnswers();
Â  Â  Â  Â  validationMessage.textContent = "";

Â  Â  Â  Â  // Si une valeur est sÃ©lectionnÃ©e (ce qui garantit que c'est 1, 2 ou 3)
Â  Â  Â  Â  if (value !== null) {
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // Sauvegarde de la valeur valide
Â  Â  Â  Â  Â  Â  currentVars[varKey] = value;
Â  Â  Â  Â  Â  Â  inputElement.value = value; // Afficher la valeur choisie dans le champ K
Â  Â  Â  Â  Â  Â  saveEnigmaAnswers(currentVars);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  // Si rien n'est sÃ©lectionnÃ©, on efface l'ancienne valeur
Â  Â  Â  Â  Â  Â  currentVars[varKey] = null;
Â  Â  Â  Â  Â  Â  inputElement.value = "";
Â  Â  Â  Â  Â  Â  saveEnigmaAnswers(currentVars);
Â  Â  Â  Â  }
Â  Â  }
Â  Â  
Â  Â  /**
Â  Â  Â * Fonction d'initialisation : charge les donnÃ©es au chargement de la page et prÃ©-sÃ©lectionne le radio.
Â  Â  Â * @param {string} varKey - La lettre de la variable pour cette page (ex: 'K').
Â  Â  Â */
Â  Â  function initEnigmaPage(varKey) {
Â  Â  Â  Â  const loadedVars = loadEnigmaAnswers();
Â  Â  Â  Â  const inputElement = document.getElementById(varKey);
Â  Â  Â  Â  const savedValue = loadedVars[varKey];
Â  Â  Â  Â  
Â  Â  Â  Â  if (inputElement && savedValue !== null) {
Â  Â  Â  Â  Â  Â  const radioElement = document.querySelector(`input[name="K_choice"][value="${savedValue}"]`);
Â  Â  Â  Â  Â  Â  
Â  Â  Â  Â  Â  Â  // PrÃ©-sÃ©lectionner le bouton radio et mettre Ã  jour l'input text
Â  Â  Â  Â  Â  Â  if (radioElement) {
Â  Â  Â  Â  Â  Â  Â  Â  radioElement.checked = true;
Â  Â  Â  Â  Â  Â  Â  Â  inputElement.value = savedValue;
Â  Â  Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  Â  Â  // GÃ©rer le cas oÃ¹ la valeur sauvegardÃ©e est invalide
Â  Â  Â  Â  Â  Â  Â  Â  document.getElementById('validation-message').textContent = `âŒ La valeur sauvegardÃ©e (${savedValue}) est invalide. Veuillez refaire votre choix.`;
Â  Â  Â  Â  Â  Â  Â  Â  loadedVars[varKey] = null;
Â  Â  Â  Â  Â  Â  Â  Â  saveEnigmaAnswers(loadedVars);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  };
</script>

</body>
</html>